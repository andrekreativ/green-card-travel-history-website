<!DOCTYPE html>
<html>
<head>
	<title>Travel History</title>
</head>
<body>
	<h1>Travel History</h1>
	<form>
		<label for="trip">Enter trip details:</label>
		<input type="text" id="trip" name="trip" placeholder="e.g. New York, USA, 01/01/2023 - 01/07/2023">

		<button type="button" onclick="addTrip()">Add Trip</button>
	</form>

	<h2>Trip List</h2>
	<ul id="tripList"></ul>

	<button type="button" onclick="calculateTime()">Calculate Time Spent Abroad</button>

	<p id="result"></p>

	<script>
		var trips = [];

		function addTrip() {
			var tripInput = document.getElementById("trip").value;
			if (tripInput !== "") {
				trips.push(tripInput);
				document.getElementById("tripList").innerHTML += "<li>" + tripInput + "</li>";
				document.getElementById("trip").value = "";
			}
		}

		function calculateTime() {
			// Calculate the total time spent abroad
			var totalTimeAbroad = 0;
			var today = new Date();
			for (var i = 0; i < trips.length; i++) {
				var tripDetails = trips[i].split(",");
				var startDate = new Date(tripDetails[2]);
				var endDate = new Date(tripDetails[3]);
				if (endDate.getTime() > today.getTime()) {
					endDate = today;
				}
				var timeDiff = endDate.getTime() - startDate.getTime();
				var daysAbroad = Math.ceil(timeDiff / (1000 * 3600 * 24));
				totalTimeAbroad += daysAbroad;
			}

			// Calculate the total time in the last 12 months
			var last12Months = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());
			var startDate = new Date(last12Months);
			var endDate = new Date(today);
			var timeDiff = endDate.getTime() - startDate.getTime();
			var daysLast12Months = Math.ceil(timeDiff / (1000 * 3600 * 24));

			// Display the result
			var percentAbroad = (totalTimeAbroad / daysLast12Months) * 100;
			document.getElementById("result").innerHTML = "You have spent " + totalTimeAbroad + " days abroad in the last 12 months, which is " + percentAbroad.toFixed(2) + "% of the time.";
		}
	</script>
</body>
</html>
